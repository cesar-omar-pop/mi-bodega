<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mapa de Almacén - Sección 3</title>
    <link rel="stylesheet" href="css/style.css"> <link rel="stylesheet" href="css/grid3.css"> <link rel="stylesheet" href="css/modal.css"> <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

    <script type="module" src="js/firebase-config.js"></script>
    <script type="module" src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js"></script>
    <script type="module" src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth.js"></script>

    <script type="module">
        import {
            auth
        } from './js/firebase-config.js';
        auth.onAuthStateChanged((user) => {
            if (!user) {
                if (!window.location.pathname.includes('login.html')) {
                    window.location.href = 'login.html';
                }
            } else {
                if (window.location.pathname.includes('login.html')) {
                    window.location.href = 'index.html';
                }
            }
        });
    </script>

</head>

<body>
    <div class="top-bar">
        <div class="logo">
            <h1>Mapstock</h1>
        </div>
        <div class="legend">
            <span class="legend-item"><span class="legend-circle libre"></span> Libre</span>
            <span class="legend-item"><span class="legend-circle ocupado"></span> Ocupado</span>
        </div>
        <div class="actions">
            <button id="back-to-main-button" class="action-button">Mapa Principal</button>
            <button id="back-to-map2-button" class="action-button">Mapa 2</button>
            <button id="go-to-salidas-button-map3" class="action-button">Registrar Salida</button>
        </div>
    </div>

    <div class="main-content">
        <div class="map3-overall-container">
            <div class="product-container-map3" data-product-id="JACTO_BOMBA" draggable="true">
                <span class="product-name-map3">JACTO</span>
                <span class="product-quantity-display" style="display:none;"></span>
            </div>
            <div class="product-container-map3" data-product-id="HD550_BOMBA" draggable="true">
                <span class="product-name-map3">HD550</span>
                <span class="product-quantity-display" style="display:none;"></span>
            </div>
            <div class="product-container-map3" data-product-id="LOLA20_BOMBA" draggable="true">
                <span class="product-name-map3">LOLA20</span>
                <span class="product-quantity-display" style="display:none;"></span>
            </div>
            <div class="product-container-map3" data-product-id="LOLA15_BOMBA" draggable="true">
                <span class="product-name-map3">LOLA15</span>
                <span class="product-quantity-display" style="display:none;"></span>
            </div>
            <div class="product-container-map3" data-product-id="EXPO20_BOMBA" draggable="true">
                <span class="product-name-map3">EXPO20</span>
                <span class="product-quantity-display" style="display:none;"></span>
            </div>
            <div class="product-container-map3" data-product-id="EXPO15_BOMBA" draggable="true">
                <span class="product-name-map3">EXPO15</span>
                <span class="product-quantity-display" style="display:none;"></span>
            </div>
            <div class="product-container-map3" data-product-id="425_BOMBA" draggable="true">
                <span class="product-name-map3">425</span>
                <span class="product-quantity-display" style="display:none;"></span>
            </div>
            <div class="product-container-map3 gloria" data-product-id="GLORIA_BOMBA" draggable="true">
                <span class="product-name-map3">GLORIA</span>
                <span class="product-quantity-display" style="display:none;"></span>
            </div>
            <div class="product-container-map3" data-product-id="SOLA15_BOMBA" draggable="true">
                <span class="product-name-map3">SOLA15</span>
                <span class="product-quantity-display" style="display:none;"></span>
            </div>
        </div>

        <div class="map3-two-halves-section">
            <div class="horizontal-half-block" id="left-half-block">
                <div class="product-container-map3" data-product-id="ROYALCONDOR_CERES" draggable="true">
                    <span class="product-name-map3">ROYAL CONDOR CERES</span>
                    <span class="product-quantity-display" style="display:none;"></span>
                </div>
                <div class="product-container-map3" data-product-id="ROYALCONDOR_INTEGRA" draggable="true">
                    <span class="product-name-map3">ROYAL CONDOR INTEGRA</span>
                    <span class="product-quantity-display" style="display:none;"></span>
                </div>
                <div class="product-container-map3" data-product-id="ROYALCONDOR_CLASICA_L" draggable="true">
                    <span class="product-name-map3">ROYAL CONDOR CLASICA</span>
                    <span class="product-quantity-display" style="display:none;"></span>
                </div>
            </div>

            <div class="horizontal-half-block" id="right-half-block">
                <div class="product-container-map3" data-product-id="ROYALCONDOR_CLASICA_R" draggable="true">
                    <span class="product-name-map3">ROYAL CONDOR CLASICA</span>
                    <span class="product-quantity-display" style="display:none;"></span>
                </div>
                <div class="product-container-map3" data-product-id="JACTO16_BOMBA" draggable="true">
                    <span class="product-name-map3">JACTO16</span>
                    <span class="product-quantity-display" style="display:none;"></span>
                </div>
                <div class="product-container-map3" data-product-id="JACTO20_BOMBA" draggable="true">
                    <span class="product-name-map3">JACTO20</span>
                    <span class="product-quantity-display" style="display:none;"></span>
                </div>
                <div class="product-container-map3" data-product-id="JACTOXP20_BOMBA" draggable="true">
                    <span class="product-name-map3">JACTOXP20</span>
                    <span class="product-quantity-display" style="display:none;"></span>
                </div>
            </div>
        </div>
    </div>

    <div id="modal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h3 id="modal-title">Detalles del Producto: <span id="modal-product-name-display"></span></h3>
            <p>Ajusta la cantidad y marca del producto.</p>
            <input type="hidden" id="modal-current-product-id">

            <div class="modal-body">
                <div class="modal-input-group">
                    <label for="modal-product-brand-select">Marca:</label>
                    <select id="modal-product-brand-select" required>
                        <option value="">Seleccione una marca</option>
                        <option value="SWISSMEX">SWISSMEX</option>
                        <option value="ROYAL CONDOR">ROYAL CONDOR</option>
                        <option value="JACTO">JACTO</option>
                        </select>
                </div>
                <div class="modal-input-group">
                    <label for="modal-product-quantity-input">Cantidad:</label>
                    <input type="number" id="modal-product-quantity-input" min="0" value="0" required>
                </div>
            </div>

            <div class="modal-actions">
                <button id="modal-save-button" class="save">Guardar Cambios</button>
                <button id="modal-clear-button" class="delete">Limpiar Campos</button>
            </div>
        </div>
    </div>

    <div id="toast-notification" class="toast-notification"></div>

    <script type="module" src="js/script3.js"></script>
</body>

</html>